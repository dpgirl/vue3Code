{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/baseHandler.ts", "../src/reactive.ts"],
  "sourcesContent": ["export function effect() {}", "export function isObject(val) {\r\n  return typeof val === 'object' && val !== null\r\n}", "export enum ReactiveFlags {\r\n  \"IS_REACTIVE\" = \"__v_isReactive\",\r\n}\r\n\r\nexport const mutableHandlers = {\r\n  // \u539F\u59CB\u5BF9\u8C61  \u5C5E\u6027 \u4EE3\u7406\u5BF9\u8C61\r\n  get(target, key, recevier) {\r\n    console.log('get', target, key, recevier)\r\n    if(key === ReactiveFlags.IS_REACTIVE) {\r\n      return true\r\n    }\r\n    // return target[key]    \r\n    return Reflect.get(target, key, recevier) // this\u6307\u5411\u662Freceiver, \u4E3A\u4EC0\u4E48\u4E0D\u7528target[key]\uFF1F \u4FDD\u8BC1\u7528\u6237\u4FEE\u6539\u5C5E\u6027\u65F6\uFF0C\u53EF\u4EE5\u76D1\u63A7\u5F97\u5230\r\n  },\r\n  set(target, key, value, recevier) {\r\n    console.log('set', target, key, value, recevier)\r\n    // return target[key] = value\r\n    return Reflect.set(target, key, value, recevier)\r\n  },\r\n}", "import { isObject } from \"@xuewu/shared\";\r\nimport { mutableHandlers, ReactiveFlags } from \"./baseHandler\";\r\n\r\nexport function reactive(target) {\r\n  return createReactiveObject(target)\r\n}\r\n\r\nconst reactiveMap = new WeakMap(); // \u5BF9\u8C61\u4E0E\u4EE3\u7406\u7684\u6620\u5C04\u5173\u7CFB\uFF0C\u9632\u6B62\u5185\u5B58\u6CC4\u9732, WeakMap\u5F31\u5F15\u7528\uFF0CMap\u5F3A\u5F15\u7528\uFF08\u53D8\u91CF\u4E0D\u4F1A\u88AB\u9500\u6BC1\uFF09\r\n\r\nfunction createReactiveObject(target) {\r\n  if (!isObject(target)) {\r\n    return\r\n  }\r\n\r\n  // \u6807\u8BC6\uFF0C\u5982\u679C\u5DF2\u7ECF\u4EE3\u7406\u8FC7\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5BF9\u8C61\r\n  if (target[ReactiveFlags.IS_REACTIVE]) {\r\n    return target\r\n  }\r\n\r\n  // \u9632\u6B62\u540C\u4E00\u4E2A\u5BF9\u8C61\u88AB\u4EE3\u7406\u4E24\u6B21\uFF0C\u8FD4\u56DE\u7684\u6C38\u8FDC\u662F\u540C\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61\r\n  let exitstingProxy = reactiveMap.get(target)\r\n  if (exitstingProxy) {\r\n    return exitstingProxy\r\n  }\r\n\r\n  // \u4EE3\u7406\u5BF9\u8C61\r\n  const proxy = new Proxy(target, mutableHandlers)\r\n  // \u4EE3\u7406\u524D \u4EE3\u7406\u540E\u505A\u4E00\u4E2A\u6620\u5C04\u8868  \u5982\u679C\u7528\u540C\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61\u505A\u4EE3\u7406\uFF0C\u76F4\u63A5\u8FD4\u56DE\u4E0A\u4E00\u6B21\u7684\u4EE3\u7406\u7ED3\u679C\r\n  reactiveMap.set(target, proxy)\r\n\r\n  // \u4EE3\u7406\u524D -> \u4EE3\u7406\u540E    \u4EE3\u7406\u540E -> \u4EE3\u7406\u524D\u3010\u505A\u4E2A\u6807\u8BC6\u3011\r\n  return proxy\r\n}"],
  "mappings": ";AAAO,SAAS,SAAS;AAAC;;;ACAnB,SAAS,SAAS,KAAK;AAC5B,SAAO,OAAO,QAAQ,YAAY,QAAQ;AAC5C;;;ACEO,IAAM,kBAAkB;AAAA;AAAA,EAE7B,IAAI,QAAQ,KAAK,UAAU;AACzB,YAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ;AACxC,QAAG,QAAQ,oCAA2B;AACpC,aAAO;AAAA,IACT;AAEA,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAAA,EAC1C;AAAA,EACA,IAAI,QAAQ,KAAK,OAAO,UAAU;AAChC,YAAQ,IAAI,OAAO,QAAQ,KAAK,OAAO,QAAQ;AAE/C,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,EACjD;AACF;;;AChBO,SAAS,SAAS,QAAQ;AAC/B,SAAO,qBAAqB,MAAM;AACpC;AAEA,IAAM,cAAc,oBAAI,QAAQ;AAEhC,SAAS,qBAAqB,QAAQ;AACpC,MAAI,CAAC,SAAS,MAAM,GAAG;AACrB;AAAA,EACF;AAGA,MAAI,yCAAgC,GAAG;AACrC,WAAO;AAAA,EACT;AAGA,MAAI,iBAAiB,YAAY,IAAI,MAAM;AAC3C,MAAI,gBAAgB;AAClB,WAAO;AAAA,EACT;AAGA,QAAM,QAAQ,IAAI,MAAM,QAAQ,eAAe;AAE/C,cAAY,IAAI,QAAQ,KAAK;AAG7B,SAAO;AACT;",
  "names": []
}
